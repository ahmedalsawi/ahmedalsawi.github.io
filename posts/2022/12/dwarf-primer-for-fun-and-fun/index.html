<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="If you used GDB before, This means you used some kind of debuggin info in the ELF. one of the famous ones is DWARF. Wiki one-liner is
 DWARF is a widely used, standardized debugging data format. DWARF was originally designed along with Executable and Linkable Format (ELF), although it is independent of object file formats
 Dwarf information is divided into several ELF sections and described with Debugging Information Entry (DIE)." />
<meta name="keywords" content=", debugging" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="/posts/2022/12/dwarf-primer-for-fun-and-fun/" />


    <title>
        
            DWARF primer for fun and fun :: Techiedeepdive 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.de188b3201233c251f4fd6306dbd2cb41e408fb8846c09781b2925de7df5025c.css">






<meta itemprop="name" content="DWARF primer for fun and fun">
<meta itemprop="description" content="If you used GDB before, This means you used some kind of debuggin info in the ELF. one of the famous ones is DWARF. Wiki one-liner is
 DWARF is a widely used, standardized debugging data format. DWARF was originally designed along with Executable and Linkable Format (ELF), although it is independent of object file formats
 Dwarf information is divided into several ELF sections and described with Debugging Information Entry (DIE)."><meta itemprop="datePublished" content="2022-12-10T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-12-10T00:00:00+00:00" />
<meta itemprop="wordCount" content="362"><meta itemprop="image" content=""/>
<meta itemprop="keywords" content="debugging," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content=""/>

<meta name="twitter:title" content="DWARF primer for fun and fun"/>
<meta name="twitter:description" content="If you used GDB before, This means you used some kind of debuggin info in the ELF. one of the famous ones is DWARF. Wiki one-liner is
 DWARF is a widely used, standardized debugging data format. DWARF was originally designed along with Executable and Linkable Format (ELF), although it is independent of object file formats
 Dwarf information is divided into several ELF sections and described with Debugging Information Entry (DIE)."/>




    <meta property="og:title" content="DWARF primer for fun and fun" />
<meta property="og:description" content="If you used GDB before, This means you used some kind of debuggin info in the ELF. one of the famous ones is DWARF. Wiki one-liner is
 DWARF is a widely used, standardized debugging data format. DWARF was originally designed along with Executable and Linkable Format (ELF), although it is independent of object file formats
 Dwarf information is divided into several ELF sections and described with Debugging Information Entry (DIE)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2022/12/dwarf-primer-for-fun-and-fun/" /><meta property="og:image" content=""/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-12-10T00:00:00+00:00" /><meta property="og:site_name" content="Techiedeepdive" />







    <meta property="article:published_time" content="2022-12-10 00:00:00 &#43;0000 UTC" />








    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/posts">Blog</a></li><li><a href="/reading-list/">Reading list</a></li><li><a href="/tags/">Tags</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        2 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="/posts/2022/12/dwarf-primer-for-fun-and-fun/">DWARF primer for fun and fun</a>
      </h1>

      

      

      <div class="post-content">
        <p>If you used GDB before, This means you used some kind of debuggin info in the ELF. one of the famous ones is  DWARF. Wiki one-liner is</p>
<blockquote>
<p>DWARF is a widely used, standardized debugging data format. DWARF was originally designed along with Executable and Linkable Format (ELF), although it is independent of object file formats</p>
</blockquote>
<p>Dwarf information is divided into several ELF sections and described with Debugging Information Entry (DIE).</p>
<p>Let&rsquo;s start with small example and commands to dump the dwarf DIE&rsquo;s.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">     <span style="color:#ff0;font-weight:bold">1</span>	
     <span style="color:#ff0;font-weight:bold">2</span>	<span style="color:#fff;font-weight:bold">void</span> main(){
     <span style="color:#ff0;font-weight:bold">3</span>		<span style="color:#fff;font-weight:bold">int</span> a,b;
     <span style="color:#ff0;font-weight:bold">4</span>	
     <span style="color:#ff0;font-weight:bold">5</span>		a = <span style="color:#ff0;font-weight:bold">1</span>;
     <span style="color:#ff0;font-weight:bold">6</span>		b = <span style="color:#ff0;font-weight:bold">2</span>;
     <span style="color:#ff0;font-weight:bold">7</span>		b = a + b;
     <span style="color:#ff0;font-weight:bold">8</span>	}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gcc -g main.c
dwarfdump a.out
</code></pre></div><h1 id="variables">Variables</h1>
<p>Variables and scopes DIE&rsquo;s are defined in <code>.debug_info</code> section of the ELF. The DIE tag for variable <code>a</code> is defines as <code>DW_TAG_variable</code> and <code>DW_AT_type</code> points to the DIE for base type <code>DW_TAG_base_type</code>.</p>
<pre tabindex="0"><code>.debug_info


 26 &lt; 2&gt;&lt;0x0000004b&gt;      DW_TAG_variable
 27                         DW_AT_name                  a
 28                         DW_AT_decl_file             0x00000001 /dwarf/main.c
 29                         DW_AT_decl_line             0x00000003
 30                         DW_AT_decl_column           0x00000006
 31                         DW_AT_type                  &lt;0x00000066&gt;
 32                         DW_AT_location              len 0x0002: 9168: DW_OP_fbreg -24
</code></pre><p><code>DW_TAG_base_type</code> DIE is defined at <code>0x66</code> in the same section.</p>
<pre tabindex="0"><code> 40 &lt; 1&gt;&lt;0x00000066&gt;    DW_TAG_base_type
 41                       DW_AT_byte_size             0x00000004
 42                       DW_AT_encoding              DW_ATE_signed
 43                       DW_AT_name                  int
</code></pre><h1 id="line-info-section">Line info section</h1>
<p>another useful section is <code>.debug_line</code>. each lines maps address in the elf to line number in the compilation unit scope in the original file.</p>
<pre tabindex="0"><code> 45 .debug_line: line number info for a single cu
 46 Source lines (from CU-DIE at .debug_info offset 0x0000000b):
 47 
 48             NS new statement, BB new basic block, ET end of text sequence
 49             PE prologue end, EB epilogue begin
 50             IS=val ISA number, DI=val discriminator value
 51 &lt;pc&gt;        [lno,col] NS BB ET PE EB IS= DI= uri: &quot;filepath&quot;
 52 0x00001129  [   2,12] NS uri: &quot;/Downloads/dwarf/main.c&quot;
 53 0x00001131  [   5, 4] NS
 54 0x00001138  [   6, 4] NS
 55 0x0000113f  [   7, 4] NS
 56 0x00001145  [   8, 1] NS
 57 0x00001148  [   8, 1] NS ET
</code></pre><p>And using <code>objdump</code>, we can see that address for instructions <code>0x1129</code> and <code>0x1131</code></p>
<pre tabindex="0"><code>    1129:	f3 0f 1e fa          	endbr64 
    112d:	55                   	push   %rbp
    112e:	48 89 e5             	mov    %rsp,%rbp
	int a,b;

	a = 1;
    1131:	c7 45 f8 01 00 00 00 	movl   $0x1,-0x8(%rbp)
</code></pre>
      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="tags/debugging/">debugging</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        362 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2022-12-10 00:00 &#43;0000
        

         
          
        
      </p>
    </div>

    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>

        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/2022/12/tp-link-tl-wn722n-adapter-linux-driver-part1/">
                <span class="button__icon">←</span>
                <span class="button__text">TP-Link TL-WN722N adapter - Linux driver - Part1</span>
              </a>
            </span>
          

          
            <span class="button next">
              <a href="/posts/2022/12/dvcon-random-thoughts-multiple-discovery/">
                <span class="button__text">DVcon random thoughts - Multiple discovery!</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    


    

    

  </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2023</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span><span><a href="posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
          </div>
    </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.2ce64ea6ea44a72b13dd812fc2eb5cca3efe878cce258a47c137c17edf46e0602a05e422b618a5b80b5939c731b7a293351c2f2222a21f6ee27e54a8448dd20e.js" integrity="sha512-LOZOpupEpysT3YEvwutcyj7&#43;h4zOJYpHwTfBft9G4GAqBeQithiluAtZOccxt6KTNRwvIiKiH27iflSoRI3SDg=="></script>



    </body>
</html>
