<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="This post is a deep dive into UVM objections implementation. Objections are UVM mechanism to control test shutdown(or stopping shutdown really).. It basically keeps things running until all important things stops running(ie objections are dropped).
raise_objection and drop_objection are used at the start and end of run_phase as follows
55 class test extends test_base; 56 `uvm_component_utils(test) 57 61 62 task run_phase(uvm_phase phase); 65 66 phase.raise_objection(this); ... ... 87 phase.drop_objection(this); 88 endtask RANT: Before I started this, It seemed simple enough but it turned out to be more complicated than I thought." />
<meta name="keywords" content=", UVM" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="/posts/2022/09/uvm-internals-objections/" />


    <title>
        
            UVM Internals - objections :: Techiedeepdive 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.de188b3201233c251f4fd6306dbd2cb41e408fb8846c09781b2925de7df5025c.css">






<meta itemprop="name" content="UVM Internals - objections">
<meta itemprop="description" content="This post is a deep dive into UVM objections implementation. Objections are UVM mechanism to control test shutdown(or stopping shutdown really).. It basically keeps things running until all important things stops running(ie objections are dropped).
raise_objection and drop_objection are used at the start and end of run_phase as follows
55 class test extends test_base; 56 `uvm_component_utils(test) 57 61 62 task run_phase(uvm_phase phase); 65 66 phase.raise_objection(this); ... ... 87 phase.drop_objection(this); 88 endtask RANT: Before I started this, It seemed simple enough but it turned out to be more complicated than I thought."><meta itemprop="datePublished" content="2022-09-24T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-09-24T00:00:00+00:00" />
<meta itemprop="wordCount" content="768"><meta itemprop="image" content=""/>
<meta itemprop="keywords" content="UVM," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content=""/>

<meta name="twitter:title" content="UVM Internals - objections"/>
<meta name="twitter:description" content="This post is a deep dive into UVM objections implementation. Objections are UVM mechanism to control test shutdown(or stopping shutdown really).. It basically keeps things running until all important things stops running(ie objections are dropped).
raise_objection and drop_objection are used at the start and end of run_phase as follows
55 class test extends test_base; 56 `uvm_component_utils(test) 57 61 62 task run_phase(uvm_phase phase); 65 66 phase.raise_objection(this); ... ... 87 phase.drop_objection(this); 88 endtask RANT: Before I started this, It seemed simple enough but it turned out to be more complicated than I thought."/>




    <meta property="og:title" content="UVM Internals - objections" />
<meta property="og:description" content="This post is a deep dive into UVM objections implementation. Objections are UVM mechanism to control test shutdown(or stopping shutdown really).. It basically keeps things running until all important things stops running(ie objections are dropped).
raise_objection and drop_objection are used at the start and end of run_phase as follows
55 class test extends test_base; 56 `uvm_component_utils(test) 57 61 62 task run_phase(uvm_phase phase); 65 66 phase.raise_objection(this); ... ... 87 phase.drop_objection(this); 88 endtask RANT: Before I started this, It seemed simple enough but it turned out to be more complicated than I thought." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2022/09/uvm-internals-objections/" /><meta property="og:image" content=""/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-24T00:00:00+00:00" /><meta property="og:site_name" content="Techiedeepdive" />
<meta property="og:see_also" content="/posts/2023/02/uvm-internals-deepdive-into-uvm_reg_predictor/" /><meta property="og:see_also" content="/posts/2023/02/uvm-internals-deepdive-into-uvm_reg_bit_bash_seq/" /><meta property="og:see_also" content="/posts/2023/02/uvm-internals-what-happens-when-you-call-set_auto_predict/" /><meta property="og:see_also" content="/posts/2023/01/uvm-internals-uvm_pool/" /><meta property="og:see_also" content="/posts/2023/01/uvm-internals-uvm_barrier/" />







    <meta property="article:published_time" content="2022-09-24 00:00:00 &#43;0000 UTC" />








    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/posts">Blog</a></li><li><a href="/reading-list/">Reading list</a></li><li><a href="/tags/">Tags</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        4 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="/posts/2022/09/uvm-internals-objections/">UVM Internals - objections</a>
      </h1>

      

      

      <div class="post-content">
        <p>This post is a deep dive into UVM objections implementation. Objections are UVM mechanism to control test shutdown(or stopping shutdown really).. It basically keeps things running until all important things stops running(ie objections are dropped).</p>
<p><code>raise_objection</code> and <code>drop_objection</code> are used at the start and end of run_phase as follows</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"><span style="color:#ff0;font-weight:bold">55</span> class test extends test_base;
<span style="color:#ff0;font-weight:bold">56</span>    `uvm_component_utils(test)
<span style="color:#ff0;font-weight:bold">57</span>
<span style="color:#ff0;font-weight:bold">61</span>
<span style="color:#ff0;font-weight:bold">62</span>    <span style="color:#fff;font-weight:bold">task</span> run_phase(uvm_phase phase);
<span style="color:#ff0;font-weight:bold">65</span>
<span style="color:#ff0;font-weight:bold">66</span>       phase.raise_objection(this);
    ...
    ...
<span style="color:#ff0;font-weight:bold">87</span>       phase.drop_objection(this);
<span style="color:#ff0;font-weight:bold">88</span>    <span style="color:#fff;font-weight:bold">endtask</span>
</code></pre></div><p>RANT: Before I started this, It seemed simple enough but it turned out to be more complicated than I thought. Actually, this is my third time trying to write this.</p>
<h1 id="raise_objection-and-drop_objection">raise_objection and drop_objection</h1>
<p><code>raise_objections</code> is called from <code>phase</code>. So,  Jumping to <code>raise_objection</code> defined in <code>uvm_phase.svh</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"><span style="color:#fff;font-weight:bold">function</span> <span style="color:#fff;font-weight:bold">void</span> uvm_phase::raise_objection (uvm_object obj,
                                                   <span style="color:#fff;font-weight:bold">string</span> description=<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,
                                                   <span style="color:#fff;font-weight:bold">int</span> count=<span style="color:#ff0;font-weight:bold">1</span>);
  phase_done.raise_objection(obj,description,count);
<span style="color:#fff;font-weight:bold">endfunction</span>

</code></pre></div><p><code>phase_done</code> variable is of type <code>uvm_objection</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog">uvm_objection phase_done; <span style="color:#007f7f">// phase done objection
</span></code></pre></div><p>Jumping to <code>uvm_objection.svh</code>, <code>raise_objection</code> calls <code>m_raise</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog">  virtual <span style="color:#fff;font-weight:bold">function</span> <span style="color:#fff;font-weight:bold">void</span> raise_objection (uvm_object obj=null,
                                         <span style="color:#fff;font-weight:bold">string</span> description=<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,
                                         <span style="color:#fff;font-weight:bold">int</span> count=<span style="color:#ff0;font-weight:bold">1</span>);
    <span style="color:#fff;font-weight:bold">if</span>(obj == null)
      obj = m_top;
    m_cleared = <span style="color:#ff0;font-weight:bold">0</span>;
    m_top_all_dropped = <span style="color:#ff0;font-weight:bold">0</span>;
    m_raise (obj, obj, description, count);
  <span style="color:#fff;font-weight:bold">endfunction</span>
</code></pre></div><p><code>m_raise</code> does a lot of things but mostly it does the bookkeeping for objections. In the snippet below, it increments the <code>m_total_count</code> and <code>m_source_count</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">398</span>   <span style="color:#fff;font-weight:bold">function</span> <span style="color:#fff;font-weight:bold">void</span> m_raise (uvm_object obj,
 <span style="color:#ff0;font-weight:bold">399</span>                          uvm_object source_obj,
 <span style="color:#ff0;font-weight:bold">400</span>                          <span style="color:#fff;font-weight:bold">string</span> description=<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,
 <span style="color:#ff0;font-weight:bold">401</span>                          <span style="color:#fff;font-weight:bold">int</span> count=<span style="color:#ff0;font-weight:bold">1</span>);
 <span style="color:#ff0;font-weight:bold">402</span>     <span style="color:#fff;font-weight:bold">int</span> idx;
 <span style="color:#ff0;font-weight:bold">403</span>     uvm_objection_context_object ctxt;
 <span style="color:#ff0;font-weight:bold">404</span> 
 <span style="color:#ff0;font-weight:bold">405</span>     <span style="color:#fff;font-weight:bold">if</span> (m_total_count.exists(obj))
 <span style="color:#ff0;font-weight:bold">406</span>       m_total_count[obj] += count;
 <span style="color:#ff0;font-weight:bold">407</span>     <span style="color:#fff;font-weight:bold">else</span> 
 <span style="color:#ff0;font-weight:bold">408</span>       m_total_count[obj] = count;
 <span style="color:#ff0;font-weight:bold">409</span> 
 <span style="color:#ff0;font-weight:bold">410</span>     <span style="color:#fff;font-weight:bold">if</span> (source_obj==obj) <span style="color:#fff;font-weight:bold">begin</span>
 <span style="color:#ff0;font-weight:bold">411</span>       <span style="color:#fff;font-weight:bold">if</span> (m_source_count.exists(obj))
 <span style="color:#ff0;font-weight:bold">412</span>         m_source_count[obj] += count;
 <span style="color:#ff0;font-weight:bold">413</span>       <span style="color:#fff;font-weight:bold">else</span>
 <span style="color:#ff0;font-weight:bold">414</span>         m_source_count[obj] = count;
 <span style="color:#ff0;font-weight:bold">415</span>     <span style="color:#fff;font-weight:bold">end</span>

</code></pre></div><p>Next, it calls <code>raised</code> which calls <code>comp.raised</code> on that component and triggers <code>m_events</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog">    raised(obj, source_obj, description, count);
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">800</span>   virtual <span style="color:#fff;font-weight:bold">function</span> <span style="color:#fff;font-weight:bold">void</span> raised (uvm_object obj,
 <span style="color:#ff0;font-weight:bold">801</span>                                 uvm_object source_obj,
 <span style="color:#ff0;font-weight:bold">802</span>                                 <span style="color:#fff;font-weight:bold">string</span> description,
 <span style="color:#ff0;font-weight:bold">803</span>                                 <span style="color:#fff;font-weight:bold">int</span> count);
 <span style="color:#ff0;font-weight:bold">804</span>     uvm_component comp;
 <span style="color:#ff0;font-weight:bold">805</span>     <span style="color:#fff;font-weight:bold">if</span> ($cast(comp,obj))
 <span style="color:#ff0;font-weight:bold">806</span>       comp.raised(this, source_obj, description, count);
 <span style="color:#ff0;font-weight:bold">807</span>     <span style="color:#fff;font-weight:bold">if</span> (m_events.exists(obj))
 <span style="color:#ff0;font-weight:bold">808</span>        -&gt;m_events[obj].raised;
 <span style="color:#ff0;font-weight:bold">809</span>   <span style="color:#fff;font-weight:bold">endfunction</span>

</code></pre></div><p>Enough about <code>raise_objection</code>, Let&rsquo;s look at <code>drop_objection</code>, It calls <code>m_drop</code> which backtracks everything <code>m_raise</code> does.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">587</span>   <span style="color:#fff;font-weight:bold">function</span> <span style="color:#fff;font-weight:bold">void</span> m_drop (uvm_object obj,
 <span style="color:#ff0;font-weight:bold">588</span>                         uvm_object source_obj,
 <span style="color:#ff0;font-weight:bold">589</span>                         <span style="color:#fff;font-weight:bold">string</span> description=<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,
 <span style="color:#ff0;font-weight:bold">590</span>                         <span style="color:#fff;font-weight:bold">int</span> count=<span style="color:#ff0;font-weight:bold">1</span>,
 <span style="color:#ff0;font-weight:bold">591</span>                         <span style="color:#fff;font-weight:bold">int</span> in_top_thread=<span style="color:#ff0;font-weight:bold">0</span>);
 <span style="color:#ff0;font-weight:bold">592</span>
 <span style="color:#ff0;font-weight:bold">600</span>
 <span style="color:#ff0;font-weight:bold">601</span>     <span style="color:#fff;font-weight:bold">if</span> (obj == source_obj) <span style="color:#fff;font-weight:bold">begin</span>
 <span style="color:#ff0;font-weight:bold">602</span>       <span style="color:#fff;font-weight:bold">if</span> (!m_source_count.exists(obj) || (count &gt; m_source_count[obj])) <span style="color:#fff;font-weight:bold">begin</span>
 <span style="color:#ff0;font-weight:bold">603</span>         <span style="color:#fff;font-weight:bold">if</span>(m_cleared)
 <span style="color:#ff0;font-weight:bold">604</span>           <span style="color:#fff;font-weight:bold">return</span>;
 <span style="color:#ff0;font-weight:bold">605</span>         uvm_report_fatal(<span style="color:#0ff;font-weight:bold">&#34;OBJTN_ZERO&#34;</span>, {<span style="color:#0ff;font-weight:bold">&#34;Object </span><span style="color:#0ff;font-weight:bold">\&#34;</span><span style="color:#0ff;font-weight:bold">&#34;</span>, obj.get_full_name(),
 <span style="color:#ff0;font-weight:bold">606</span>           <span style="color:#0ff;font-weight:bold">&#34;</span><span style="color:#0ff;font-weight:bold">\&#34;</span><span style="color:#0ff;font-weight:bold"> attempted to drop objection &#39;&#34;</span>,this.get_name(),<span style="color:#0ff;font-weight:bold">&#34;&#39; count below zero&#34;</span>});
 <span style="color:#ff0;font-weight:bold">607</span>         <span style="color:#fff;font-weight:bold">return</span>;
 <span style="color:#ff0;font-weight:bold">608</span>       <span style="color:#fff;font-weight:bold">end</span>
 <span style="color:#ff0;font-weight:bold">609</span>       m_source_count[obj] -= count;
 <span style="color:#ff0;font-weight:bold">610</span>     <span style="color:#fff;font-weight:bold">end</span>
 <span style="color:#ff0;font-weight:bold">611</span>
 <span style="color:#ff0;font-weight:bold">612</span>     m_total_count[obj] -= count;
 <span style="color:#ff0;font-weight:bold">613</span>
</code></pre></div><p>The important part is updating <code>m_scheduled_list</code>. I will circle back to this.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog">m_scheduled_list.push_back(ctxt);
</code></pre></div><h1 id="test-termination">Test Termination</h1>
<p>So far, I don&rsquo;t know how the objection stops test termination. Naturally, I look into <code>uvm_phase.svh</code> to understand the phase execution.</p>
<p><code>uvm_phase::execute_phase</code> forks several threads, One of those threads is <code>WAIT_FOR_ALL_DROPPED</code>. basically, it checks <code>m_top_all_dropped</code> and  goes into <code>wait_for</code> waiting for <code>UVM_ALL_DROPPED</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"><span style="color:#ff0;font-weight:bold">1197</span>                  <span style="color:#fff;font-weight:bold">if</span> (!phase_done.m_top_all_dropped)
<span style="color:#ff0;font-weight:bold">1198</span>                    phase_done.wait_for(UVM_ALL_DROPPED, top);
</code></pre></div><p><code>wait_for</code> is waiting for m_events to get <code>all_dropped</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">880</span>      m_events[obj].waiters++;
 <span style="color:#ff0;font-weight:bold">881</span>      <span style="color:#fff;font-weight:bold">case</span> (objt_event)
 <span style="color:#ff0;font-weight:bold">882</span>        UVM_RAISED:      @(m_events[obj].raised);
 <span style="color:#ff0;font-weight:bold">883</span>        UVM_DROPPED:     @(m_events[obj].dropped);
 <span style="color:#ff0;font-weight:bold">884</span>        UVM_ALL_DROPPED: @(m_events[obj].all_dropped);
 <span style="color:#ff0;font-weight:bold">885</span>      <span style="color:#fff;font-weight:bold">endcase</span>
 <span style="color:#ff0;font-weight:bold">886</span>
</code></pre></div><p><code>all_dropped</code> is the task that sends <code>m_events[obj].all_dropped</code> trigger</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">829</span>   <span style="color:#007f7f">// Function: all_dropped
</span><span style="color:#007f7f"></span> <span style="color:#ff0;font-weight:bold">830</span>   <span style="color:#007f7f">//
</span><span style="color:#007f7f"></span> <span style="color:#ff0;font-weight:bold">831</span>   <span style="color:#007f7f">// Objection callback that is called when a &lt;drop_objection&gt; has reached ~obj~,
</span><span style="color:#007f7f"></span> <span style="color:#ff0;font-weight:bold">832</span>   <span style="color:#007f7f">// and the total count for ~obj~ goes to zero. This callback is executed
</span><span style="color:#007f7f"></span> <span style="color:#ff0;font-weight:bold">833</span>   <span style="color:#007f7f">// after the drain time associated with ~obj~. The default implementation
</span><span style="color:#007f7f"></span> <span style="color:#ff0;font-weight:bold">834</span>   <span style="color:#007f7f">// calls &lt;uvm_component::all_dropped&gt;.
</span><span style="color:#007f7f"></span>
 <span style="color:#ff0;font-weight:bold">836</span>   virtual <span style="color:#fff;font-weight:bold">task</span> all_dropped (uvm_object obj,
 <span style="color:#ff0;font-weight:bold">837</span>                             uvm_object source_obj,
 <span style="color:#ff0;font-weight:bold">838</span>                             <span style="color:#fff;font-weight:bold">string</span> description,
 <span style="color:#ff0;font-weight:bold">839</span>                             <span style="color:#fff;font-weight:bold">int</span> count);
 <span style="color:#ff0;font-weight:bold">840</span>     uvm_component comp;
 <span style="color:#ff0;font-weight:bold">841</span>     <span style="color:#fff;font-weight:bold">if</span>($cast(comp,obj))
 <span style="color:#ff0;font-weight:bold">842</span>       comp.all_dropped(this, source_obj, description, count);
 <span style="color:#ff0;font-weight:bold">843</span>     <span style="color:#fff;font-weight:bold">if</span> (m_events.exists(obj))
 <span style="color:#ff0;font-weight:bold">844</span>        -&gt;m_events[obj].all_dropped;
 <span style="color:#ff0;font-weight:bold">845</span>     <span style="color:#fff;font-weight:bold">if</span> (obj == m_top)
 <span style="color:#ff0;font-weight:bold">846</span>       m_top_all_dropped = <span style="color:#ff0;font-weight:bold">1</span>;
 <span style="color:#ff0;font-weight:bold">847</span>   <span style="color:#fff;font-weight:bold">endtask</span>
</code></pre></div><p>What calls <code>all_dropped</code>? I will trace from the end here and work my way backward.</p>
<p><code>all_dropped</code> is called from <code>m_forked_drain</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog">all_dropped(obj,source_obj,description, count)
</code></pre></div><p>and <code>m_forked_drain</code> is called from <code>m_execute_scheduled_forks</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">697</span> `endif
 <span style="color:#ff0;font-weight:bold">698</span>                       <span style="color:#007f7f">// Execute the forked drain
</span><span style="color:#007f7f"></span> <span style="color:#ff0;font-weight:bold">699</span>                       objection.m_forked_drain(ctxt.obj, ctxt.source_obj, ctxt.description, ctxt.count, <span style="color:#ff0;font-weight:bold">1</span>);
</code></pre></div><p><code>m_execute_scheduled_forks</code> waits for m_scheduled_list to have something.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">662</span>   <span style="color:#007f7f">// background process; when non
</span><span style="color:#007f7f"></span> <span style="color:#ff0;font-weight:bold">663</span>   static <span style="color:#fff;font-weight:bold">task</span> m_execute_scheduled_forks();
 <span style="color:#ff0;font-weight:bold">664</span>     <span style="color:#fff;font-weight:bold">while</span>(<span style="color:#ff0;font-weight:bold">1</span>) <span style="color:#fff;font-weight:bold">begin</span>
 <span style="color:#ff0;font-weight:bold">665</span>       <span style="color:#fff;font-weight:bold">wait</span>(m_scheduled_list.size() != <span style="color:#ff0;font-weight:bold">0</span>);
 <span style="color:#ff0;font-weight:bold">666</span>       <span style="color:#fff;font-weight:bold">if</span>(m_scheduled_list.size() != <span style="color:#ff0;font-weight:bold">0</span>) <span style="color:#fff;font-weight:bold">begin</span>
 <span style="color:#ff0;font-weight:bold">667</span>           uvm_objection_context_object c;
 <span style="color:#ff0;font-weight:bold">668</span>           uvm_objection o;
</code></pre></div><p>Notes that <code>m_execute_scheduled_forks</code> is called from <code>m_init_objections</code> which is called from</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"> <span style="color:#ff0;font-weight:bold">764</span>   static <span style="color:#fff;font-weight:bold">function</span> <span style="color:#fff;font-weight:bold">void</span> m_init_objections();
 <span style="color:#ff0;font-weight:bold">765</span>     <span style="color:#fff;font-weight:bold">fork</span>
 <span style="color:#ff0;font-weight:bold">766</span>       uvm_objection::m_execute_scheduled_forks();
 <span style="color:#ff0;font-weight:bold">767</span>     join_none
 <span style="color:#ff0;font-weight:bold">768</span>   <span style="color:#fff;font-weight:bold">endfunction</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog"><span style="color:#ff0;font-weight:bold">319</span> <span style="color:#fff;font-weight:bold">task</span> uvm_root::run_test(<span style="color:#fff;font-weight:bold">string</span> test_name=<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>);
<span style="color:#ff0;font-weight:bold">320</span>
<span style="color:#ff0;font-weight:bold">332</span>   <span style="color:#007f7f">// Set up the process that decouples the thread that drops objections from
</span><span style="color:#007f7f"></span><span style="color:#ff0;font-weight:bold">333</span>   <span style="color:#007f7f">// the process that processes drop/all_dropped objections. Thus, if the
</span><span style="color:#007f7f"></span><span style="color:#ff0;font-weight:bold">334</span>   <span style="color:#007f7f">// original calling thread (the &#34;dropper&#34;) gets killed, it does not affect
</span><span style="color:#007f7f"></span><span style="color:#ff0;font-weight:bold">335</span>   <span style="color:#007f7f">// drain-time and propagation of the drop up the hierarchy.
</span><span style="color:#007f7f"></span><span style="color:#ff0;font-weight:bold">336</span>   <span style="color:#007f7f">// Needs to be done in run_test since it needs to be in an
</span><span style="color:#007f7f"></span><span style="color:#ff0;font-weight:bold">337</span>   <span style="color:#007f7f">// initial block to fork a process.
</span><span style="color:#007f7f"></span><span style="color:#ff0;font-weight:bold">338</span>   uvm_objection::m_init_objections();
</code></pre></div><p>Back to <code>m_drop</code>m m_scheduled_list is updated with <code>ctxt</code> which activates the logic in <code>m_execute_scheduled_forks</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-verilog" data-lang="verilog">m_scheduled_list.push_back(ctxt)
</code></pre></div>
      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="tags/uvm/">UVM</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        768 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2022-09-24 01:00 &#43;0100
        

         
          
        
      </p>
    </div>

    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>

        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/2022/09/the-slowest-rsa-implementation/">
                <span class="button__icon">←</span>
                <span class="button__text">The slowest RSA implementation</span>
              </a>
            </span>
          

          
            <span class="button next">
              <a href="/posts/2022/09/python-asyncio-not-so-deep-dive-into-asyncio-and-cpython/">
                <span class="button__text">python asyncio - not-so-deep dive into asyncio and cpython</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    


    

    

  </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2023</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span><span><a href="posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
          </div>
    </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.2ce64ea6ea44a72b13dd812fc2eb5cca3efe878cce258a47c137c17edf46e0602a05e422b618a5b80b5939c731b7a293351c2f2222a21f6ee27e54a8448dd20e.js" integrity="sha512-LOZOpupEpysT3YEvwutcyj7&#43;h4zOJYpHwTfBft9G4GAqBeQithiluAtZOccxt6KTNRwvIiKiH27iflSoRI3SDg=="></script>



    </body>
</html>
