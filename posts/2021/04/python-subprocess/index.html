<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="subprocess.run python 3.5 provided new interface to replace older os.system to call programs and shell commands. doc
run() is wrapper around the lower interface Popen which provides finer and more complicated control. Also, run waits until process is done but popen will continue execution and user needs to check for process termination.
subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, capture_output=False, shell=False, cwd=None, timeout=None, check=False, encoding=None, errors=None, text=None, env=None, universal_newlines=None, **other_popen_kwargs) as docs mentions these are the most important options." />
<meta name="keywords" content=", Python" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="/posts/2021/04/python-subprocess/" />


    <title>
        
            Python Subprocess :: Techiedeepdive 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.de188b3201233c251f4fd6306dbd2cb41e408fb8846c09781b2925de7df5025c.css">






<meta itemprop="name" content="Python Subprocess">
<meta itemprop="description" content="subprocess.run python 3.5 provided new interface to replace older os.system to call programs and shell commands. doc
run() is wrapper around the lower interface Popen which provides finer and more complicated control. Also, run waits until process is done but popen will continue execution and user needs to check for process termination.
subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, capture_output=False, shell=False, cwd=None, timeout=None, check=False, encoding=None, errors=None, text=None, env=None, universal_newlines=None, **other_popen_kwargs) as docs mentions these are the most important options."><meta itemprop="datePublished" content="2021-04-18T14:44:43+01:00" />
<meta itemprop="dateModified" content="2021-04-18T14:44:43+01:00" />
<meta itemprop="wordCount" content="302"><meta itemprop="image" content=""/>
<meta itemprop="keywords" content="Python," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content=""/>

<meta name="twitter:title" content="Python Subprocess"/>
<meta name="twitter:description" content="subprocess.run python 3.5 provided new interface to replace older os.system to call programs and shell commands. doc
run() is wrapper around the lower interface Popen which provides finer and more complicated control. Also, run waits until process is done but popen will continue execution and user needs to check for process termination.
subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, capture_output=False, shell=False, cwd=None, timeout=None, check=False, encoding=None, errors=None, text=None, env=None, universal_newlines=None, **other_popen_kwargs) as docs mentions these are the most important options."/>




    <meta property="og:title" content="Python Subprocess" />
<meta property="og:description" content="subprocess.run python 3.5 provided new interface to replace older os.system to call programs and shell commands. doc
run() is wrapper around the lower interface Popen which provides finer and more complicated control. Also, run waits until process is done but popen will continue execution and user needs to check for process termination.
subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, capture_output=False, shell=False, cwd=None, timeout=None, check=False, encoding=None, errors=None, text=None, env=None, universal_newlines=None, **other_popen_kwargs) as docs mentions these are the most important options." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2021/04/python-subprocess/" /><meta property="og:image" content=""/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-18T14:44:43+01:00" />
<meta property="article:modified_time" content="2021-04-18T14:44:43+01:00" /><meta property="og:site_name" content="Techiedeepdive" />







    <meta property="article:published_time" content="2021-04-18 14:44:43 &#43;0100 IST" />








    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/posts">Blog</a></li><li><a href="/reading-list/">Reading list</a></li><li><a href="/tags/">Tags</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        2 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="/posts/2021/04/python-subprocess/">Python Subprocess</a>
      </h1>

      

      

      <div class="post-content">
        <h1 id="subprocessrun">subprocess.run</h1>
<p>python 3.5 provided new interface to replace older os.system to call programs and shell commands. <a href="https://docs.python.org/3/library/subprocess.html#subprocess.run">doc</a></p>
<p>run() is wrapper around the lower interface Popen which provides finer and more complicated control. Also, run waits until process is done but popen will continue execution and user needs to check for process termination.</p>
<pre tabindex="0"><code>subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, capture_output=False, shell=False, cwd=None, timeout=None, check=False, encoding=None, errors=None, text=None, env=None, universal_newlines=None, **other_popen_kwargs)
</code></pre><p>as docs mentions these are the most important options.</p>
<h1 id="args">args</h1>
<p>This could be list of strings for the program and program arguments.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">subproccess.run([<span style="color:#0ff;font-weight:bold">&#34;ls&#34;</span>, <span style="color:#0ff;font-weight:bold">&#34;-l&#34;</span>])
</code></pre></div><p>if it&rsquo;s one string, <em>shell=True</em> must be used to allow shell to handle the whole command</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">run ( <span style="color:#0ff;font-weight:bold">&#34;ls -l f*&#34;</span>,shell=<span style="color:#fff;font-weight:bold">True</span>)
</code></pre></div><h1 id="stdin-stdout-stderr">stdin, stdout, stderr</h1>
<p>According to doc,</p>
<blockquote>
<p>stdin, stdout and stderr specify the executed program’s standard input, standard output and standard error file handles, respectively. Valid values are PIPE, DEVNULL, an existing file descriptor (a positive integer), an existing file object, and None</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#fff;font-weight:bold">import</span> subprocess

<span style="color:#fff;font-weight:bold">print</span>(<span style="color:#0ff;font-weight:bold">&#34;########## default&#34;</span>)
ls = subprocess.run([<span style="color:#0ff;font-weight:bold">&#34;ls&#34;</span>])

<span style="color:#fff;font-weight:bold">print</span>((ls))


<span style="color:#fff;font-weight:bold">print</span>(<span style="color:#0ff;font-weight:bold">&#34;########## suppress output&#34;</span>)
ls = subprocess.run([<span style="color:#0ff;font-weight:bold">&#34;ls&#34;</span>], stdout= subprocess.DEVNULL)

<span style="color:#fff;font-weight:bold">print</span>(<span style="color:#0ff;font-weight:bold">&#34;########## send to file&#34;</span>)
fh = <span style="color:#fff;font-weight:bold">open</span>(<span style="color:#0ff;font-weight:bold">&#34;t&#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;w&#34;</span>)
ls = subprocess.run([<span style="color:#0ff;font-weight:bold">&#34;ls&#34;</span>], stdout= fh)

<span style="color:#fff;font-weight:bold">print</span>(<span style="color:#0ff;font-weight:bold">&#34;########## capture in process&#34;</span>)
ls = subprocess.run([<span style="color:#0ff;font-weight:bold">&#34;ls&#34;</span>], stdout= subprocess.PIPE)
<span style="color:#fff;font-weight:bold">print</span>(ls.stdout)
ls = subprocess.run([<span style="color:#0ff;font-weight:bold">&#34;ls&#34;</span>], stdout= subprocess.PIPE, text=<span style="color:#fff;font-weight:bold">True</span>)
</code></pre></div><h1 id="text">text</h1>
<p>by default, stdout, stdin, stderr are using byte encoding for output. with <em>text=True</em>, the output is string</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">In [<span style="color:#ff0;font-weight:bold">10</span>]: run ( <span style="color:#0ff;font-weight:bold">&#34;echo test&#34;</span>,shell=<span style="color:#fff;font-weight:bold">True</span>,stdout=subprocess.PIPE).stdout                                                                  
Out[<span style="color:#ff0;font-weight:bold">10</span>]: <span style="color:#0ff;font-weight:bold">b</span><span style="color:#0ff;font-weight:bold">&#39;test</span><span style="color:#0ff;font-weight:bold">\n</span><span style="color:#0ff;font-weight:bold">&#39;</span>

In [<span style="color:#ff0;font-weight:bold">11</span>]: run ( <span style="color:#0ff;font-weight:bold">&#34;echo test&#34;</span>,shell=<span style="color:#fff;font-weight:bold">True</span>,stdout=subprocess.PIPE, text=<span style="color:#fff;font-weight:bold">True</span>).stdout                                                       
Out[<span style="color:#ff0;font-weight:bold">11</span>]: <span style="color:#0ff;font-weight:bold">&#39;test</span><span style="color:#0ff;font-weight:bold">\n</span><span style="color:#0ff;font-weight:bold">&#39;</span>
</code></pre></div><h1 id="subprocesspopen">subprocess.Popen</h1>
<p>Popen starts the process and user needs to check when it terminated if needed</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">proc = subprocess.Popen(<span style="color:#0ff;font-weight:bold">&#34;sleep 10&#34;</span>, shell=<span style="color:#fff;font-weight:bold">True</span>)
<span style="color:#fff;font-weight:bold">try</span>:
        outs, errs = proc.communicate(timeout=<span style="color:#ff0;font-weight:bold">3</span>)
<span style="color:#fff;font-weight:bold">except</span> subprocess.TimeoutExpired:
        proc.kill()
        outs, errs = proc.communicate()
        <span style="color:#fff;font-weight:bold">print</span>(<span style="color:#0ff;font-weight:bold">&#34;timeout&#34;</span>)
</code></pre></div><p>There is also Popen.wait which makes program wait for child process which make Popen() same as run()</p>
<p>also there are several API to control the process, probably the most important would be</p>
<ul>
<li>Popen.send_signal(signal)</li>
<li>Popen.kill()</li>
</ul>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="tags/python/">Python</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        302 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2021-04-18 14:44 &#43;0100
        

         
          
        
      </p>
    </div>

    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>

        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/2021/04/python-threading/">
                <span class="button__icon">←</span>
                <span class="button__text">Python Threading</span>
              </a>
            </span>
          

          
            <span class="button next">
              <a href="/posts/2021/04/python-filter/map/">
                <span class="button__text">Python filter/map</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    


    

    

  </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2023</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span><span><a href="posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
          </div>
    </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.2ce64ea6ea44a72b13dd812fc2eb5cca3efe878cce258a47c137c17edf46e0602a05e422b618a5b80b5939c731b7a293351c2f2222a21f6ee27e54a8448dd20e.js" integrity="sha512-LOZOpupEpysT3YEvwutcyj7&#43;h4zOJYpHwTfBft9G4GAqBeQithiluAtZOccxt6KTNRwvIiKiH27iflSoRI3SDg=="></script>



    </body>
</html>
