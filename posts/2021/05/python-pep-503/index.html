<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Python Pep 503 · Techiedeepdive
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="description" content="pep 503 defines the python package repo api used py pypi.org. I thought it was fun to create small repo using Flask (to host Flask) :)
The spec require two urls

root url
project url

root url return html listing available project page. the anchor tags has the following requirements

The text of the anchor tag MUST be the name of the project and the href attribute MUST link to the URL for that particular project.">
<meta name="keywords" content="homepage, blog">



  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="/">
  <meta name="twitter:title" content="Python Pep 503">
  <meta name="twitter:description" content="pep 503 defines the python package repo api used py pypi.org. I thought it was fun to create small repo using Flask (to host Flask) :)
The spec require two urls
root url project url root url return html listing available project page. the anchor tags has the following requirements
The text of the anchor tag MUST be the name of the project and the href attribute MUST link to the URL for that particular project.">

<meta property="og:url" content="/posts/2021/05/python-pep-503/">
  <meta property="og:site_name" content="Techiedeepdive">
  <meta property="og:title" content="Python Pep 503">
  <meta property="og:description" content="pep 503 defines the python package repo api used py pypi.org. I thought it was fun to create small repo using Flask (to host Flask) :)
The spec require two urls
root url project url root url return html listing available project page. the anchor tags has the following requirements
The text of the anchor tag MUST be the name of the project and the href attribute MUST link to the URL for that particular project.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-05-01T13:09:31+01:00">
    <meta property="article:modified_time" content="2021-05-01T13:09:31+01:00">
    <meta property="article:tag" content="Python">
    <meta property="og:image" content="/">




<link rel="canonical" href="/posts/2021/05/python-pep-503/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.aa5ef26fa979d6793724ae2dbd71efa94fd16cb1c5c7db3b6651f21f9892a5fd.css" integrity="sha256-ql7yb6l51nk3JK4tvXHvqU/RbLHFx9s7ZlHyH5iSpf0=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="/">
      Techiedeepdive
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/reading-list/">Reading list</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/tags/">Tags</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="/posts/2021/05/python-pep-503/">
              Python Pep 503
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2021-05-01T13:09:31&#43;01:00">
                May 1, 2021
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              One-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/python/">Python</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p><a href="https://www.python.org/dev/peps/pep-0503/"  class="external-link" target="_blank" rel="noopener">pep 503</a> defines the python package repo api used py <em>pypi.org</em>. I thought it was fun to create small repo using Flask (to host Flask) :)</p>
<p>The spec require two urls</p>
<ul>
<li>root url</li>
<li>project url</li>
</ul>
<p>root url return html listing available project page. the anchor tags has the following requirements</p>
<blockquote>
<p>The text of the anchor tag MUST be the name of the project and the href attribute MUST link to the URL for that particular project.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#8b949e;font-weight:bold;font-style:italic">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#7ee787">html</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#7ee787">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#7ee787">meta</span> name<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#a5d6ff">&#34;pypi:repository-version&#34;</span> content<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#a5d6ff">&#34;1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#7ee787">title</span>&gt;Simple index&lt;/<span style="color:#7ee787">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#7ee787">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#7ee787">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;<span style="color:#7ee787">a</span> href<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#a5d6ff">&#34;/foo/&#34;</span>&gt;Foo&lt;/<span style="color:#7ee787">a</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#7ee787">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#7ee787">html</span>&gt;
</span></span></code></pre></div><p>the project url, returns  html with anchor tags for tar file name and href for the that tar.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#8b949e;font-weight:bold;font-style:italic">&lt;!DOCTYPE html&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#7ee787">html</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#7ee787">head</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#7ee787">meta</span> name<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#a5d6ff">&#34;pypi:repository-version&#34;</span> content<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#a5d6ff">&#34;1.0&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#7ee787">title</span>&gt;Links for Flask&lt;/<span style="color:#7ee787">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#7ee787">head</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#7ee787">body</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#7ee787">h1</span>&gt;Links for Flask&lt;/<span style="color:#7ee787">h1</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#7ee787">a</span> href<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#a5d6ff">&#34;/static/Foo-0.1.tar.gz&#34;</span>&gt;Flask-0.1.tar.gz&lt;/<span style="color:#7ee787">a</span>&gt;&lt;<span style="color:#7ee787">br</span>/&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#7ee787">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#7ee787">html</span>&gt;
</span></span></code></pre></div><h1 id="full-source-code">
  Full source code
  <a class="heading-link" href="#full-source-code">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip3 install Foo --index-url  http://localhost:5000 -v
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">import</span> <span style="color:#ff7b72">os</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">from</span> <span style="color:#ff7b72">flask</span> <span style="color:#ff7b72">import</span> Flask, send_from_directory, send_file
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app <span style="color:#ff7b72;font-weight:bold">=</span> Flask(__name__, static_url_path<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#a5d6ff">&#39;&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d2a8ff;font-weight:bold">@app.route</span>(<span style="color:#a5d6ff">&#39;/static/&lt;path:filename&gt;&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">def</span> <span style="color:#d2a8ff;font-weight:bold">f</span>(filename):
</span></span><span style="display:flex;"><span>    root_dir <span style="color:#ff7b72;font-weight:bold">=</span> os<span style="color:#ff7b72;font-weight:bold">.</span>getcwd()
</span></span><span style="display:flex;"><span>    print(root_dir, filename)
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">return</span> send_from_directory(os<span style="color:#ff7b72;font-weight:bold">.</span>path<span style="color:#ff7b72;font-weight:bold">.</span>join(root_dir), filename)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#d2a8ff;font-weight:bold">@app.route</span>(<span style="color:#a5d6ff">&#39;/&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">def</span> <span style="color:#d2a8ff;font-weight:bold">home</span>():
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">return</span> <span style="color:#a5d6ff">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;!DOCTYPE html&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;html&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">  &lt;head&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">    &lt;meta name=&#34;pypi:repository-version&#34; content=&#34;1.0&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">    &lt;title&gt;Simple index&lt;/title&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">  &lt;/head&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">  &lt;body&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;a href=&#34;/foo/&#34;&gt;Foo&lt;/a&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;/body&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;/html&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#d2a8ff;font-weight:bold">@app.route</span>(<span style="color:#a5d6ff">&#39;/foo/&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">def</span> <span style="color:#d2a8ff;font-weight:bold">hello_world</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">return</span> <span style="color:#a5d6ff">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;!DOCTYPE html&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;html&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">  &lt;head&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">    &lt;meta name=&#34;pypi:repository-version&#34; content=&#34;1.0&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">    &lt;title&gt;Links for Flask&lt;/title&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">  &lt;/head&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">  &lt;body&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">    &lt;h1&gt;Links for Flask&lt;/h1&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">    &lt;a href=&#34;/static/Foo-0.1.tar.gz&#34;&gt;Foo-0.1.tar.gz&lt;/a&gt;&lt;br/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">    &lt;/body&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&lt;/html&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#a5d6ff">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>app<span style="color:#ff7b72;font-weight:bold">.</span>run(debug<span style="color:#ff7b72;font-weight:bold">=</span><span style="color:#79c0ff">True</span>)
</span></span></code></pre></div>
      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2024
    
    ·
    
      Licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA-4.0</a>
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
