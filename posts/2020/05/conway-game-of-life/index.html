<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Conway Game of Life · Techiedeepdive
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="description" content="Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own wiki and all.
The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.
 Any live cell with fewer than two live neighbors dies, as if by under-population. Any live cell with two or three live neighbors lives on to the next generation.">
<meta name="keywords" content="">

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content=""/>

<meta name="twitter:title" content="Conway Game of Life"/>
<meta name="twitter:description" content="Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own wiki and all.
The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.
 Any live cell with fewer than two live neighbors dies, as if by under-population. Any live cell with two or three live neighbors lives on to the next generation."/>

<meta property="og:title" content="Conway Game of Life" />
<meta property="og:description" content="Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own wiki and all.
The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.
 Any live cell with fewer than two live neighbors dies, as if by under-population. Any live cell with two or three live neighbors lives on to the next generation." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2020/05/conway-game-of-life/" /><meta property="og:image" content=""/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-23T15:23:40+02:00" />
<meta property="article:modified_time" content="2020-05-23T15:23:40+02:00" /><meta property="og:site_name" content="Techiedeepdive" />





<link rel="canonical" href="/posts/2020/05/conway-game-of-life/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.577e3c5ead537873430da16f0964b754a120fd87c4e2203a00686e7c75b51378.css" integrity="sha256-V348Xq1TeHNDDaFvCWS3VKEg/YfE4iA6AGhufHW1E3g=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="">
      Techiedeepdive
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/reading-list/">Reading list</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/tags/">Tags</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="/posts/2020/05/conway-game-of-life/">
              Conway Game of Life
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2020-05-23T15:23:40&#43;02:00">
                May 23, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/python/">python</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/games/">games</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p>Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life"  class="external-link" target="_blank" rel="noopener">wiki</a> and all.</p>
<p>The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.</p>
<ul>
<li>Any live cell with fewer than two live neighbors dies, as if by under-population.</li>
<li>Any live cell with two or three live neighbors lives on to the next generation.</li>
<li>Any live cell with more than three live neighbors dies, as if by overpopulation.</li>
<li>Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction</li>
</ul>
<h1 id="implementation">
  Implementation
  <a class="heading-link" href="#implementation">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>It&rsquo;s using the following packages</p>
<ul>
<li>numpy and scipy for matrix operations</li>
<li>matplotlib for plotting and animation</li>
</ul>
<p><img src="/conway01.png" alt="Example image"></p>
<h1 id="animation">
  Animation
  <a class="heading-link" href="#animation">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>matplotlib is new to me, so it took me some time to understand the basic building blocks. but what i want to highlight below is <code>FuncAnimation</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#fff;font-weight:bold">def</span> generations(self):
        <span style="color:#fff;font-weight:bold">for</span> g in <span style="color:#fff;font-weight:bold">range</span> (self.G):
            <span style="color:#fff;font-weight:bold">yield</span> self.step()


    <span style="color:#fff;font-weight:bold">def</span> run(self):
        fig, ax = plt.subplots()
        mat = ax.matshow(self.grid)   
        ani = animation.FuncAnimation(fig, mat.set_data, self.generations, interval=<span style="color:#ff0;font-weight:bold">500</span>, repeat=<span style="color:#fff;font-weight:bold">False</span>)
        plt.show()
</code></pre></div><p><a href="https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.animation.FuncAnimation.html"  class="external-link" target="_blank" rel="noopener">docs</a> says</p>
<blockquote>
<p>fig: Figure
The figure object that is used to get draw, resize, and any other needed events.</p>
<p>func: callable
The function to call at each frame. The first argument will be the next value in frames. Any additional positional arguments can be &gt; supplied via the fargs parameter.</p>
<p>frames: iterable, int, generator function, or None, optional
If an iterable, then simply use the values provided. If the iterable has a length, it will override the save_count kwarg.</p>
</blockquote>
<p>So, the second parameter is <code>callable</code>, in this case i am passing <code>mat.set_data</code> so, it will be called by matplolib to update frames.
but the most important part is that third parameter is <code>iterable</code> or <code>int</code> or <code>generator function</code>. and this parameter will be passed to the callable in parameter 2.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#fff;font-weight:bold">def</span> func(frame, *fargs) 
</code></pre></div><p>which effectively is doing the following considering the generator will run <code>G</code> generations before stopping.</p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#fff;font-weight:bold">def</span> mat.set_data(this.grid)
</code></pre></div><h1 id="gotcha">
  gotcha
  <a class="heading-link" href="#gotcha">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>well, the game is straightforward to write but there was something that bugged me little. Mainly, calculating the number of neighbors living cells.</p>
<p>I initially implemented it by manually counting ucelsls sing (i,j) index and it worked but it was ugly because of the boundary checks.  Then I found <code>convolve2d</code> from <code>scipy</code>. It&rsquo;s neat because using the right kernel, i can count the neighbors for all cells with one line. more details about convolution <a href="https://en.wikipedia.org/wiki/Kernel_%28image_processing%29"  class="external-link" target="_blank" rel="noopener">wiki</a></p>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">        W = np.array([[<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>],
              [<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">1</span>],
              [<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>]])
        self.neighbour = signal.convolve2d(self.grid, W, <span style="color:#0ff;font-weight:bold">&#39;same&#39;</span>)
</code></pre></div><h1 id="putting-it-all-together">
  putting it all together
  <a class="heading-link" href="#putting-it-all-together">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#fff;font-weight:bold">import</span> numpy <span style="color:#fff;font-weight:bold">as</span> np
<span style="color:#fff;font-weight:bold">from</span> scipy <span style="color:#fff;font-weight:bold">import</span> signal
<span style="color:#fff;font-weight:bold">import</span> matplotlib.pyplot <span style="color:#fff;font-weight:bold">as</span> plt 
<span style="color:#fff;font-weight:bold">import</span> matplotlib.animation <span style="color:#fff;font-weight:bold">as</span> animation

<span style="color:#fff;font-weight:bold">import</span> argparse

<span style="color:#fff;font-weight:bold">class</span> Conway():
    <span style="color:#fff;font-weight:bold">def</span> __init__(self, N=<span style="color:#ff0;font-weight:bold">10</span>, G=<span style="color:#ff0;font-weight:bold">1</span>, shape=<span style="color:#0ff;font-weight:bold">&#39;random&#39;</span>):
        self.N = N
        self.G = G
        self.grid = <span style="color:#fff;font-weight:bold">None</span>
        self.neighbour = <span style="color:#fff;font-weight:bold">None</span>

        <span style="color:#fff;font-weight:bold">if</span> shape == <span style="color:#0ff;font-weight:bold">&#39;random&#39;</span>:
            self.grid = np.random.choice(a=[<span style="color:#fff;font-weight:bold">False</span>, <span style="color:#fff;font-weight:bold">True</span>], size=(N, N))
        <span style="color:#fff;font-weight:bold">else</span>:
            self.grid = np.zeros((N, N), dtype=<span style="color:#0ff;font-weight:bold">&#39;bool&#39;</span>)

    <span style="color:#fff;font-weight:bold">def</span> calc(self):
        W = np.array([[<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>],
              [<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">0</span>, <span style="color:#ff0;font-weight:bold">1</span>],
              [<span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>, <span style="color:#ff0;font-weight:bold">1</span>]])
        self.neighbour = signal.convolve2d(self.grid, W, <span style="color:#0ff;font-weight:bold">&#39;same&#39;</span>)
            
    <span style="color:#fff;font-weight:bold">def</span> step(self):
        self.calc()
        <span style="color:#fff;font-weight:bold">for</span> i in <span style="color:#fff;font-weight:bold">range</span>(self.N):
            <span style="color:#fff;font-weight:bold">for</span> j in <span style="color:#fff;font-weight:bold">range</span>(self.N):
                <span style="color:#007f7f"># Rule1: if dead cell have exactly 3 surrouding living cell, it become a live</span>
                <span style="color:#fff;font-weight:bold">if</span> (self.grid[i,j] ==  <span style="color:#ff0;font-weight:bold">0</span> and self.neighbour[i,j] == <span style="color:#ff0;font-weight:bold">3</span>):
                    self.grid[i,j] = <span style="color:#ff0;font-weight:bold">1</span>
                <span style="color:#007f7f"># Rule2 and Rule3: if living cell has &gt; 3 or &lt; 2 surrounding, it dies</span>
                <span style="color:#fff;font-weight:bold">if</span> (self.grid[i,j] == <span style="color:#ff0;font-weight:bold">1</span> and(self.neighbour[i,j] &lt; <span style="color:#ff0;font-weight:bold">2</span> or self.neighbour[i,j] &gt; <span style="color:#ff0;font-weight:bold">3</span>) ):
                    self.grid[i,j] = <span style="color:#ff0;font-weight:bold">0</span>
                <span style="color:#007f7f"># livining cell has 2 or 3, it staying alive</span>
        <span style="color:#fff;font-weight:bold">return</span> self.grid

    <span style="color:#fff;font-weight:bold">def</span> generations(self):
        <span style="color:#fff;font-weight:bold">for</span> g in <span style="color:#fff;font-weight:bold">range</span> (self.G):
            <span style="color:#fff;font-weight:bold">yield</span> self.step()


    <span style="color:#fff;font-weight:bold">def</span> run(self):
        fig, ax = plt.subplots()
        mat = ax.matshow(self.grid)   
        ani = animation.FuncAnimation(fig, mat.set_data, self.generations, interval=<span style="color:#ff0;font-weight:bold">500</span>, repeat=<span style="color:#fff;font-weight:bold">False</span>)
        plt.show()

<span style="color:#fff;font-weight:bold">def</span> main():
    parser = argparse.ArgumentParser(description=<span style="color:#0ff;font-weight:bold">&#39;Conway game of life&#39;</span>)

    parser.add_argument(<span style="color:#0ff;font-weight:bold">&#39;N&#39;</span>, <span style="color:#fff;font-weight:bold">type</span>=<span style="color:#fff;font-weight:bold">int</span>, help=<span style="color:#0ff;font-weight:bold">&#39;Grid Size&#39;</span>)
    parser.add_argument(<span style="color:#0ff;font-weight:bold">&#39;G&#39;</span>, <span style="color:#fff;font-weight:bold">type</span>=<span style="color:#fff;font-weight:bold">int</span>, help=<span style="color:#0ff;font-weight:bold">&#39;Generations Count&#39;</span>)

    args = parser.parse_args()

    g = Conway(args.N,args.G)
    g.run()
    

<span style="color:#fff;font-weight:bold">if</span> __name__ == <span style="color:#0ff;font-weight:bold">&#34;__main__&#34;</span>:
    main()
</code></pre></div>
      </div>


      <footer>
        


        
        
        
        
        

        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2024
    
    ·
    
      Licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA-4.0</a>
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.369d90111ae4409b4e51de5efd23a46b92663fcc82dc9a0efde7f70bffc3f949.js" integrity="sha256-Np2QERrkQJtOUd5e/SOka5JmP8yC3JoO/ef3C//D&#43;Uk="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
