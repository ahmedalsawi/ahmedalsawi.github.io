<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Conway&amp;rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&amp;rsquo;s own wiki and all.
The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.
 Any live cell with fewer than two live neighbors dies, as if by under-population. Any live cell with two or three live neighbors lives on to the next generation." />
<meta name="keywords" content=", python, games" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="/posts/2020/05/conway-game-of-life/" />


    <title>
        
            Conway Game of Life :: Techiedeepdive 
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.de188b3201233c251f4fd6306dbd2cb41e408fb8846c09781b2925de7df5025c.css">






<meta itemprop="name" content="Conway Game of Life">
<meta itemprop="description" content="Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own wiki and all.
The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.
 Any live cell with fewer than two live neighbors dies, as if by under-population. Any live cell with two or three live neighbors lives on to the next generation."><meta itemprop="datePublished" content="2020-05-23T15:23:40+02:00" />
<meta itemprop="dateModified" content="2020-05-23T15:23:40+02:00" />
<meta itemprop="wordCount" content="635"><meta itemprop="image" content=""/>
<meta itemprop="keywords" content="python,games," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content=""/>

<meta name="twitter:title" content="Conway Game of Life"/>
<meta name="twitter:description" content="Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own wiki and all.
The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.
 Any live cell with fewer than two live neighbors dies, as if by under-population. Any live cell with two or three live neighbors lives on to the next generation."/>




    <meta property="og:title" content="Conway Game of Life" />
<meta property="og:description" content="Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own wiki and all.
The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.
 Any live cell with fewer than two live neighbors dies, as if by under-population. Any live cell with two or three live neighbors lives on to the next generation." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2020/05/conway-game-of-life/" /><meta property="og:image" content=""/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-23T15:23:40+02:00" />
<meta property="article:modified_time" content="2020-05-23T15:23:40+02:00" /><meta property="og:site_name" content="Techiedeepdive" />







    <meta property="article:published_time" content="2020-05-23 15:23:40 &#43;0200 &#43;0200" />








    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">$ cd /home/</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/posts">Blog</a></li><li><a href="/reading-list/">Reading list</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        3 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="/posts/2020/05/conway-game-of-life/">Conway Game of Life</a>
      </h1>

      

      

      <div class="post-content">
        <p>Conway&rsquo;s Game of Life is a zero-player game introduced by the mathematician John Horton Conway in 1970. Well, It has it&rsquo;s own <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">wiki</a> and all.</p>
<p>The rules are simple. You start with a grid of cells with initial state of either living or dead. Cells interact with neighbors to define the next generation of cells.</p>
<ul>
<li>Any live cell with fewer than two live neighbors dies, as if by under-population.</li>
<li>Any live cell with two or three live neighbors lives on to the next generation.</li>
<li>Any live cell with more than three live neighbors dies, as if by overpopulation.</li>
<li>Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction</li>
</ul>
<h1 id="implementation">Implementation</h1>
<p>It&rsquo;s using the following packages</p>
<ul>
<li>numpy and scipy for matrix operations</li>
<li>matplotlib for plotting and animation</li>
</ul>
<p><img src="/conway01.png" alt="Example image"></p>
<h1 id="animation">Animation</h1>
<p>matplotlib is new to me, so it took me some time to understand the basic building blocks. but what i want to highlight below is <code>FuncAnimation</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">generations</span>(self):
        <span style="color:#66d9ef">for</span> g <span style="color:#f92672">in</span> range (self<span style="color:#f92672">.</span>G):
            <span style="color:#66d9ef">yield</span> self<span style="color:#f92672">.</span>step()


    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">run</span>(self):
        fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots()
        mat <span style="color:#f92672">=</span> ax<span style="color:#f92672">.</span>matshow(self<span style="color:#f92672">.</span>grid)   
        ani <span style="color:#f92672">=</span> animation<span style="color:#f92672">.</span>FuncAnimation(fig, mat<span style="color:#f92672">.</span>set_data, self<span style="color:#f92672">.</span>generations, interval<span style="color:#f92672">=</span><span style="color:#ae81ff">500</span>, repeat<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
        plt<span style="color:#f92672">.</span>show()
</code></pre></div><p><a href="https://matplotlib.org/3.2.1/api/_as_gen/matplotlib.animation.FuncAnimation.html">docs</a> says</p>
<blockquote>
<p>fig: Figure
The figure object that is used to get draw, resize, and any other needed events.</p>
<p>func: callable
The function to call at each frame. The first argument will be the next value in frames. Any additional positional arguments can be &gt; supplied via the fargs parameter.</p>
<p>frames: iterable, int, generator function, or None, optional
If an iterable, then simply use the values provided. If the iterable has a length, it will override the save_count kwarg.</p>
</blockquote>
<p>So, the second parameter is <code>callable</code>, in this case i am passing <code>mat.set_data</code> so, it will be called by matplolib to update frames.
but the most important part is that third parameter is <code>iterable</code> or <code>int</code> or <code>generator function</code>. and this parameter will be passed to the callable in parameter 2.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">func</span>(frame, <span style="color:#f92672">*</span>fargs) 
</code></pre></div><p>which effectively is doing the following considering the generator will run <code>G</code> generations before stopping.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">mat</span><span style="color:#f92672">.</span>set_data(this<span style="color:#f92672">.</span>grid)
</code></pre></div><h1 id="gotcha">gotcha</h1>
<p>well, the game is straightforward to write but there was something that bugged me little. Mainly, calculating the number of neighbors living cells.</p>
<p>I initially implemented it by manually counting ucelsls sing (i,j) index and it worked but it was ugly because of the boundary checks.  Then I found <code>convolve2d</code> from <code>scipy</code>. It&rsquo;s neat because using the right kernel, i can count the neighbors for all cells with one line. more details about convolution <a href="https://en.wikipedia.org/wiki/Kernel_(image_processing)">wiki</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">        W <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>],
              [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>],
              [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>]])
        self<span style="color:#f92672">.</span>neighbour <span style="color:#f92672">=</span> signal<span style="color:#f92672">.</span>convolve2d(self<span style="color:#f92672">.</span>grid, W, <span style="color:#e6db74">&#39;same&#39;</span>)
</code></pre></div><h1 id="putting-it-all-together">putting it all together</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
<span style="color:#f92672">from</span> scipy <span style="color:#f92672">import</span> signal
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt 
<span style="color:#f92672">import</span> matplotlib.animation <span style="color:#66d9ef">as</span> animation

<span style="color:#f92672">import</span> argparse

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Conway</span>():
    <span style="color:#66d9ef">def</span> __init__(self, N<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, G<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, shape<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;random&#39;</span>):
        self<span style="color:#f92672">.</span>N <span style="color:#f92672">=</span> N
        self<span style="color:#f92672">.</span>G <span style="color:#f92672">=</span> G
        self<span style="color:#f92672">.</span>grid <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
        self<span style="color:#f92672">.</span>neighbour <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>

        <span style="color:#66d9ef">if</span> shape <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;random&#39;</span>:
            self<span style="color:#f92672">.</span>grid <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>choice(a<span style="color:#f92672">=</span>[<span style="color:#66d9ef">False</span>, <span style="color:#66d9ef">True</span>], size<span style="color:#f92672">=</span>(N, N))
        <span style="color:#66d9ef">else</span>:
            self<span style="color:#f92672">.</span>grid <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>zeros((N, N), dtype<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bool&#39;</span>)

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">calc</span>(self):
        W <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>],
              [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>],
              [<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>]])
        self<span style="color:#f92672">.</span>neighbour <span style="color:#f92672">=</span> signal<span style="color:#f92672">.</span>convolve2d(self<span style="color:#f92672">.</span>grid, W, <span style="color:#e6db74">&#39;same&#39;</span>)
            
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">step</span>(self):
        self<span style="color:#f92672">.</span>calc()
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(self<span style="color:#f92672">.</span>N):
            <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(self<span style="color:#f92672">.</span>N):
                <span style="color:#75715e"># Rule1: if dead cell have exactly 3 surrouding living cell, it become a live</span>
                <span style="color:#66d9ef">if</span> (self<span style="color:#f92672">.</span>grid[i,j] <span style="color:#f92672">==</span>  <span style="color:#ae81ff">0</span> <span style="color:#f92672">and</span> self<span style="color:#f92672">.</span>neighbour[i,j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>):
                    self<span style="color:#f92672">.</span>grid[i,j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
                <span style="color:#75715e"># Rule2 and Rule3: if living cell has &gt; 3 or &lt; 2 surrounding, it dies</span>
                <span style="color:#66d9ef">if</span> (self<span style="color:#f92672">.</span>grid[i,j] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">and</span>(self<span style="color:#f92672">.</span>neighbour[i,j] <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">or</span> self<span style="color:#f92672">.</span>neighbour[i,j] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">3</span>) ):
                    self<span style="color:#f92672">.</span>grid[i,j] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
                <span style="color:#75715e"># livining cell has 2 or 3, it staying alive</span>
        <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>grid

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">generations</span>(self):
        <span style="color:#66d9ef">for</span> g <span style="color:#f92672">in</span> range (self<span style="color:#f92672">.</span>G):
            <span style="color:#66d9ef">yield</span> self<span style="color:#f92672">.</span>step()


    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">run</span>(self):
        fig, ax <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots()
        mat <span style="color:#f92672">=</span> ax<span style="color:#f92672">.</span>matshow(self<span style="color:#f92672">.</span>grid)   
        ani <span style="color:#f92672">=</span> animation<span style="color:#f92672">.</span>FuncAnimation(fig, mat<span style="color:#f92672">.</span>set_data, self<span style="color:#f92672">.</span>generations, interval<span style="color:#f92672">=</span><span style="color:#ae81ff">500</span>, repeat<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
        plt<span style="color:#f92672">.</span>show()

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
    parser <span style="color:#f92672">=</span> argparse<span style="color:#f92672">.</span>ArgumentParser(description<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Conway game of life&#39;</span>)

    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#39;N&#39;</span>, type<span style="color:#f92672">=</span>int, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Grid Size&#39;</span>)
    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#39;G&#39;</span>, type<span style="color:#f92672">=</span>int, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Generations Count&#39;</span>)

    args <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parse_args()

    g <span style="color:#f92672">=</span> Conway(args<span style="color:#f92672">.</span>N,args<span style="color:#f92672">.</span>G)
    g<span style="color:#f92672">.</span>run()
    

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
    main()
</code></pre></div>
      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="tags/python/">python</a></span>
        <span class="tag"><a href="tags/games/">games</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        635 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2020-05-23 14:23 &#43;0100
        

         
          
        
      </p>
    </div>

    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>

        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/2020/05/sudoku-sat-solution/">
                <span class="button__icon">←</span>
                <span class="button__text">Sudoku SAT Solution</span>
              </a>
            </span>
          

          
            <span class="button next">
              <a href="/posts/2020/05/md5-python-implementation/">
                <span class="button__text">MD5 python implementation</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    


    

    

  </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2023</span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span><span><a href="posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
          </div>
    </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.2ce64ea6ea44a72b13dd812fc2eb5cca3efe878cce258a47c137c17edf46e0602a05e422b618a5b80b5939c731b7a293351c2f2222a21f6ee27e54a8448dd20e.js" integrity="sha512-LOZOpupEpysT3YEvwutcyj7&#43;h4zOJYpHwTfBft9G4GAqBeQithiluAtZOccxt6KTNRwvIiKiH27iflSoRI3SDg=="></script>



    </body>
</html>
